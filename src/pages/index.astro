---
import BaseLayout from '../layouts/BaseLayout.astro';
import { getFeaturedCaseStudies } from '../lib/case-studies';
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { Badge } from "@/components/ui/badge";
import ServicesGrid from '../components/services/ServicesGrid.astro';
import { getCollection } from 'astro:content'; 

import BubbleMap from '../components/bubbles/BubbleMap';
import LogoGrid from '../components/LogoGrid.astro';
import { ArrowRight, MessageCircle } from "lucide-react";
import VideoTestimonials from '../components/VideoTestimonials';
import OurFormula from '../components/OurFormula';
import TeamSection from '../components/TeamSection';

import TeamSection from '../components/TeamSection';

const teamMembers = [
    {
        name: "Maurits Fornier",
        role: "Legal Design Lead",
        imageUrl: "/images/team/sunmoon-stokhof.jpg"
    },
    {
        name: "Dielis Delen",
        role: "Software Developer",
        imageUrl: "/images/team/dielis-delen.webp"
    },
    {
        name: "Savannah Koomen",
        role: "Strategie Lead",
        imageUrl: "/images/team/savannah-koomen.webp"
    }
];


const featuredCaseStudies = await getFeaturedCaseStudies();

// Get all case studies
const allCaseStudies = await getCollection('case-studies');

// Filter to only get case studies that have a stakeholder assigned
const bubbleMapCaseStudies = allCaseStudies.filter(study => study.data.stakeholder);

// Process the content for each case study
const processedStudies = await Promise.all(
  bubbleMapCaseStudies.map(async (study) => {
    const { Content } = await study.render();
    return { ...study, Content };
  })
);
---

<BaseLayout title="Home">
  {/* Hero Section */}
    
<section class="relative min-h-screen overflow-visible">
  {/* Text Content */}
  <div class="grid grid-cols-1 lg:grid-cols-2 min-h-screen items-center relative">
    <div class="px-6 py-16 lg:py-24">
      <p class="text-[#A5B4FC] text-lg mb-4">Legal design & legal tech studio</p>
      <h1 class="font-display text-6xl lg:text-8xl font-bold mb-8 leading-none">
        Juridische
        <br />
        ontwarners
      </h1>
      <p class="text-lg lg:text-xl text-white/80 mb-10 max-w-xl">
        Patroon maakt juridische complexiteit toegankelijk met
        slimme technologie en goed ontwerp. Beweeg over de
        bollen en ontdek hoe wij dat doen.
      </p>
      <div class="flex flex-col sm:flex-row gap-4">
        <Button 
          size="lg" 
          class="bg-[#E1FF4C] hover:bg-[#E1FF4C]/90 text-black font-medium px-8"
        >
          Neem contact op
        </Button>
        <Button 
          size="lg" 
          variant="outline" 
          class="border-white/20 text-white hover:bg-white/10"
        >
          Lees meer
        </Button>
      </div>
    </div>

    {/* Placeholder for visual balance */}
    <div class="hidden lg:block"></div>
  </div>

  {/* BubbleMap positioned higher in the stacking context */}
  <div class="absolute top-0 right-[-20%] w-[70%] h-full hidden lg:block z-20">
    <BubbleMap client:load caseStudies={bubbleMapCaseStudies} />
  </div>
</section>  

  <LogoGrid />

  <VideoTestimonials client:load />



  <ServicesGrid />


  <OurFormula client:load />
  <TeamSection client:load teamMembers={teamMembers} />


 
</BaseLayout>