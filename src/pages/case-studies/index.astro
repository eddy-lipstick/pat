---
// src/pages/case-studies/index.astro
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';
import CaseStudyCard from '@/components/CaseStudyCard';
import { Card } from '@/components/ui/card';
import LargeCaseStudyGrid from '@/components/LargeCaseStudyGrid';
import Hero from '@/components/Hero.astro';

// Get all case studies and sort by date
const allCaseStudies = await getCollection('case-studies');
const sortedCaseStudies = allCaseStudies.sort((a, b) => {
  // Parse the dates and sort in descending order (newest first)
  return new Date(b.data.metadata.date).getTime() - new Date(a.data.metadata.date).getTime();
});

// Get unique services for filtering (if you still need this)
const allServices = [
  ...new Set(allCaseStudies.flatMap((study) => study.data.metadata.relatedSkills)),
].sort();

// Get unique tags for filtering (if you still need this)
const allTags = [...new Set(allCaseStudies.flatMap((study) => study.data.tags || []))].sort();
---

<BaseLayout title="Case Studies">
  <div>
    <!-- Hero Section -->
    <Hero
      class="min-h-[60vh]"
      subtitle="Recht in beeld"
      title="  Complexe juridische materie, helder verbeeld"
    >
      <div class=""></div>
    </Hero>

    <div class="container mx-auto px-4 py-12">
      <LargeCaseStudyGrid studies={sortedCaseStudies} client:load />
    </div>
  </div>
</BaseLayout>
